{% extends 'shop/basic.html' %}
{% block title %} Home {% endblock %}
{% block body %}


{% load static %}
<!-- Slide SHow for Product View Page              -->

<div id="header-carousel" class="carousel slide" data-ride="carousel">
    {% for i in range %}
    <div class="carousel-inner">
        <div class="carousel-item active" style="height: 440px;">
            <img class="img-fluid" src='/media/{{product.0.banner_image}}' alt="Image">
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                <div class="p-3" style="max-width: 700px;">
                    <h4 class="text-light text-uppercase font-weight-medium mb-3">{{product.0.discounted}} Off Your
                        First Order</h4>
                    <h4 class="display-5 text-white font-weight-semi-bold mb-4">{{product.0.product_name}}</h4>
                    <a href="" class="btn btn-light py-2 px-3">Shop Now</a>
                </div>
            </div>
        </div>
        {% endfor %}



          {% for i in product %}
        {% if i.is_home == 1 %}
        <div class="carousel-item" style="height: 440px;">
            <img class="img-fluid" src="/media/{{i.banner_image}}" alt="Image">
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                <div class="p-3" style="max-width: 700px;">
                    <h4 class="text-light text-uppercase font-weight-medium mb-3">{{i.discounted}} Off Your First
                        Order</h4>
                    <h3 class="display-4 text-white font-weight-semi-bold mb-4">{{i.product_name}}</h3>
                    <a href="" class="btn btn-light py-2 px-3">Shop Now</a>
                </div>
            </div>
        </div>
        {% endif %}

        {% endfor %}
    </div>
    <!--      This is previous and next button Code -->
    <a class="carousel-control-prev" href="#header-carousel" data-slide="prev">
        <div class="btn btn-dark" style="width: 45px; height: 45px;">
            <span class="carousel-control-prev-icon mb-n2"></span>
        </div>
    </a>
    <a class="carousel-control-next" href="#header-carousel" data-slide="next">
        <div class="btn btn-dark" style="width: 45px; height: 45px;">
            <span class="carousel-control-next-icon mb-n2"></span>
        </div>
    </a>
    <!--    This is previous and next button Code end -->
</div>
<!-- Slide SHow COde end here              -->

<!-- Featured Start -->
<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center border mb-4" style="padding: 30px;">
                <h1 class="fa fa-check text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Quality Product</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center border mb-4" style="padding: 30px;">
                <h1 class="fa fa-shipping-fast text-primary m-0 mr-2"></h1>
                <h5 class="font-weight-semi-bold m-0">Free Shipping</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center border mb-4" style="padding: 30px;">
                <h1 class="fas fa-exchange-alt text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">14-Day Return</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center border mb-4" style="padding: 30px;">
                <h1 class="fa fa-phone-volume text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">24/7 Support</h5>
            </div>
        </div>
    </div>
</div>
<!-- Featured End -->


<!-- Categories Start code-->

<div class="container-fluid pt-5">

    <div class="row px-xl-5 pb-3">
        {% for i in range %}
        <div class="col-lg-4 col-md-6 pb-1">
            <div class="cat-item d-flex flex-column border mb-4" style="padding: 30px;">
                <p class="text-right">{{product.counter}} Products</p>
                <a href="" class="cat-img position-relative overflow-hidden mb-3">
                    <img class="img-fluid" src="/media/{{product.0.image}}" style="width:255.13px;height:255.13px;"
                        alt="">
                </a>
                <h5 class="font-weight-semi-bold m-0">{{product.0.category}}</h5>
            </div>
        </div>
        <!-- </div>-->
        {% endfor %}


        <!--          <div  class="row px-xl-5 pb-3">-->
        <div class="col-lg-4 col-md-6 pb-1">

            {% for i in product|slice:"1:"  %}

            {% if i.catstatus == 1 %}
            <div class="cat-item d-flex flex-column border mb-4" style="padding: 30px;">
                <p class="text-right"> Products</p>
                <a href="" class="cat-img position-relative overflow-hidden mb-3">
                    <img class="img-fluid" src="/media/{{i.image}}" style="width:255.13px;height:255.13px;" alt="">
                </a>
                <h5 class="font-weight-semi-bold m-0">{{i.category}}</h5>
            </div>
            {% endif %}


        </div>
        {% endfor %}

    </div>
</div>

<!-- Categories End -->


<!-- Offer Start -->
<div class="container-fluid offer pt-5">
    <div class="row px-xl-5">
        <div class="col-md-6 pb-4">
            <div class="position-relative bg-secondary text-center text-md-right text-white mb-2 py-5 px-5">
                <img src=" " alt="">
                <div class="position-relative" style="z-index: 1;">
                    <h5 class="text-uppercase text-primary mb-3">20% off the all order</h5>
                    <h1 class="mb-4 font-weight-semi-bold">Summer Collection</h1>
                    <a href="" class="btn btn-outline-primary py-md-2 px-md-3">Shop Now</a>
                </div>
            </div>
        </div>
        <div class="col-md-6 pb-4">
            <div class="position-relative bg-secondary text-center text-md-left text-white mb-2 py-5 px-5">
                <img src=" " alt="">
                <div class="position-relative" style="z-index: 1;">
                    <h5 class="text-uppercase text-primary mb-3">20% off the all order</h5>
                    <h1 class="mb-4 font-weight-semi-bold">Spring Collection</h1>
                    <a href="" class="btn btn-outline-primary py-md-2 px-md-3">Shop Now</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Offer End -->


<!--Trandy  Products Start -->

<div class="container-fluid pt-5">
    <div class="text-center mb-4">
        <h2 class="section-title px-5"><span class="px-2">Trandy Products</span></h2>
    </div>

    <div class="row px-xl-5 pb-3">
        {% for i in product %}

        {% if i.is_trandy == 1 %}
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="card product-item border-0 mb-4">
                <div class="card-header product-img position-relative overflow-hidden bg-transparent border p-0">
                    <img class="img-fluid w-100" src="/media/{{i.image}}" style="width:255.13px;height:255.13px;"
                        alt="">
                </div>
                <div class="card-body border-left border-right text-center p-0 pt-4 pb-3">
                    <h6 class="text-truncate mb-3" id="namepr{{i.id}}">{{i.product_name}}</h6>
                    <div class="d-flex justify-content-center">
                        <span>৳</span>
                        <h6 id="pricepr{{i.id}}">{{i.price}}</h6>
                        <h6 class="text-muted ml-2">
                            <del>৳{{i.mrp}}</del>
                        </h6>
                    </div>
                </div>
                <div class="card-footer d-flex justify-content-between bg-light border">

                    <a href="/home/detail/{{i.id}}" id="vwt{{i.id}}" class="btn btn-sm text-dark p-0">
                        <i class="fas fa-eye text-primary mr-1"></i>View Detail</a>
                    <!--         Add to cart for trandy product        -->
                    <span id="divpr{{i.id}}" class="divpr">
                        <button id="pr{{i.id}}" class="btn btn-sm text-dark p-0 cart">
                            <i class="fas fa-shopping-cart text-primary mr-1 "></i>Add To Cart
                        </button>
                    </span>

                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>


<!-- Trandy Products End -->


<!-- Subscribe Start -->
<div class="container-fluid bg-secondary my-5">
    <div class="row justify-content-md-center py-5 px-xl-5">
        <div class="col-md-6 col-12 py-5">
            <div class="text-center mb-2 pb-2">
                <h2 class="section-title px-5 mb-3"><span class="bg-secondary px-2">Stay Updated</span></h2>
                <p>Please subscribe here through email.</p>
            </div>
            <form action="">
                <div class="input-group">
                    <input type="text" class="form-control border-white p-4" placeholder="Email Goes Here">
                    <div class="input-group-append">
                        <button class="btn btn-primary px-4">Subscribe</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Subscribe End -->


<!-- Just Arrived Products Start -->
<div class="container-fluid pt-5">
    <div class="text-center mb-4">
        <h2 class="section-title px-5"><span class="px-2">Just Arrived</span></h2>
    </div>

    <div class="row px-xl-5 pb-3">
        {% for i in product %}
        {% if i.is_arrived == 1 %}
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="card product-item border-0 mb-4">
                <div class="card-header product-img position-relative overflow-hidden bg-transparent border p-0">
                    <img class="img-fluid w-100" src="/media/{{i.image}}" style="width:255px; height:255px;" alt="">
                </div>
                <div class="card-body border-left border-right text-center p-0 pt-4 pb-3">
                    <h6 class="text-truncate mb-3">{{i.product_name}}</h6>
                    <div class="d-flex justify-content-center">
                        <h6>৳{{i.price}}</h6>
                        <h6 class="text-muted ml-2">
                            <del>৳{{i.mrp}}</del>
                        </h6>
                    </div>
                </div>
                <div class="card-footer d-flex justify-content-between bg-light border">
                    <a href="/home/detail/{{i.id}}" id="vwj{{i.id}}" class="btn btn-sm text-dark p-0 ">
                        <i class="fas fa-eye text-primary mr-1"></i>View Detail</a>
                       <span id="divprj{{i.id}}" class="divprj">
                    <button id="prj{{i.id}}" class="btn btn-sm text-dark p-0  ">
                        <i class="fas fa-shopping-cart text-primary mr-1"></i>Add To Cart
                    </button>
                       </span>
                </div>
                {% endif %}
            </div>

        </div>
        {% endfor %}
    </div>
</div>

<!--Just arrived Products End -->


{% endblock %}
{% block js %}
<script>


    if (localStorage.getItem('cart') == null) {
        var cart = {};
    }
    else {
        cart = JSON.parse(localStorage.getItem('cart'));
        updateCart(cart);
    }

    // If the add to cart button is clicked, add/increment the item
    $('.divpr').on('click', 'button.cart', function () {
        var idstr = this.id.toString();

        if (cart[idstr] != undefined) {
            qty = cart[idstr][0] + 1;

        } else {

            qty = 1;
            name = document.getElementById('name' + idstr).innerHTML;
            price = document.getElementById('price' + idstr).innerHTML;
            cart[idstr] = [qty, name, parseInt(price)];
        }
        updateCart(cart);


    });


    function updateCart(cart) {
        var sum = 0;
        for (var item in cart) {
            sum = sum + cart[item][0];
            document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class='btn btn-primary  minus'>-</button> <span id='val"+ item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn btn-primary  plus'> + </button>";
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        document.getElementById('cart').innerHTML = sum;
        console.log(cart);

    }
    // If plus or minus button is clicked, change the cart as well as the display value
    $('.divpr').on("click", "button.minus", function () {
        a = this.id.slice(7,);
        cart['pr' + a][0] = cart['pr' + a][0] - 1;
        cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);

        document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];

        if(cart['pr' + a][0]==0){
        document.getElementById('divpr' + a).innerHTML ='<button id="pr'+a+'"class="btn btn-sm text-dark p-0"> <i class="fas fa-shopping-cart text-primary mr-1"></i>Add to Cart</button>';
        delete cart['pr' + a];
        }
        else{
        document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
        }
        updateCart(cart);

    });


    $('.divpr').on("click", "button.plus", function () {
        b = this.id.slice(6,);
        cart['pr' + b][0] = cart['pr' + b][0] + 1;
        document.getElementById('valpr' + b).innerHTML = cart['pr' + b][0];
        updateCart(cart);

    });



</script>
{% endblock %}